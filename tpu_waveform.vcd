#! /opt/homebrew/Cellar/icarus-verilog/12.0/bin/vvp
:ivl_version "12.0 (stable)";
:ivl_delay_selection "TYPICAL";
:vpi_time_precision + 0;
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/system.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_sys.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/vhdl_textio.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/v2005_math.vpi";
:vpi_module "/opt/homebrew/Cellar/icarus-verilog/12.0/lib/ivl/va_math.vpi";
S_0x146655470 .scope module, "tpu_tb" "tpu_tb" 2 1;
 .timescale 0 0;
v0x14666bb30_0 .var "clk", 0 0;
v0x14666bbd0_0 .var "instruction_in", 31 0;
v0x14666bc70_0 .net "result_out", 31 0, L_0x14666cef0;  1 drivers
v0x14666bd40_0 .var "rst", 0 0;
S_0x14664e590 .scope module, "uut" "TPU" 2 8, 3 1 0, S_0x146655470;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "rst";
    .port_info 2 /INPUT 32 "instruction_in";
    .port_info 3 /OUTPUT 32 "result_out";
L_0x14666c390 .functor OR 1, L_0x14666c170, L_0x14666c290, C4<0>, C4<0>;
L_0x14666ce80 .functor BUFZ 32, v0x14666ab00_0, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>;
L_0x14666cef0 .functor BUFZ 32, v0x14666ab00_0, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>, C4<00000000000000000000000000000000>;
L_0x148088010 .functor BUFT 1, C4<00100000>, C4<0>, C4<0>, C4<0>;
v0x146669a90_0 .net/2u *"_ivl_0", 7 0, L_0x148088010;  1 drivers
L_0x148088130 .functor BUFT 1, C4<00100001>, C4<0>, C4<0>, C4<0>;
v0x146669b30_0 .net/2u *"_ivl_14", 7 0, L_0x148088130;  1 drivers
v0x146669bd0_0 .net *"_ivl_2", 0 0, L_0x14666c170;  1 drivers
L_0x1480881c0 .functor BUFT 1, C4<00010000>, C4<0>, C4<0>, C4<0>;
v0x146669c60_0 .net/2u *"_ivl_20", 7 0, L_0x1480881c0;  1 drivers
L_0x148088208 .functor BUFT 1, C4<00010001>, C4<0>, C4<0>, C4<0>;
v0x146669d10_0 .net/2u *"_ivl_24", 7 0, L_0x148088208;  1 drivers
L_0x148088250 .functor BUFT 1, C4<00000001>, C4<0>, C4<0>, C4<0>;
v0x146669e00_0 .net/2u *"_ivl_28", 7 0, L_0x148088250;  1 drivers
L_0x148088298 .functor BUFT 1, C4<00000010>, C4<0>, C4<0>, C4<0>;
v0x146669eb0_0 .net/2u *"_ivl_32", 7 0, L_0x148088298;  1 drivers
L_0x1480882e0 .functor BUFT 1, C4<00000000>, C4<0>, C4<0>, C4<0>;
v0x146669f60_0 .net/2u *"_ivl_38", 7 0, L_0x1480882e0;  1 drivers
L_0x148088058 .functor BUFT 1, C4<00110001>, C4<0>, C4<0>, C4<0>;
v0x14666a010_0 .net/2u *"_ivl_4", 7 0, L_0x148088058;  1 drivers
v0x14666a120_0 .net *"_ivl_6", 0 0, L_0x14666c290;  1 drivers
v0x14666a1c0_0 .net "alu_result", 31 0, v0x146664990_0;  1 drivers
v0x14666a260_0 .net "att_result", 31 0, v0x146664f60_0;  1 drivers
v0x14666a300_0 .net "clk", 0 0, v0x14666bb30_0;  1 drivers
v0x14666a390_0 .net "conv_result", 31 0, v0x146665a10_0;  1 drivers
v0x14666a460_0 .net "dma_result", 31 0, v0x1466666f0_0;  1 drivers
v0x14666a500_0 .var "ex_result_EX_MEM", 31 0;
v0x14666a5b0_0 .var "ex_stage_result", 31 0;
v0x14666a750_0 .net "fused_result", 31 0, v0x146666fe0_0;  1 drivers
v0x14666a810_0 .net "gather_scatter_result", 31 0, v0x1466697f0_0;  1 drivers
v0x14666a8a0_0 .var "instr_IF_ID", 31 0;
v0x14666a930_0 .net "instruction_in", 31 0, v0x14666bbd0_0;  1 drivers
v0x14666a9c0_0 .net "mem_out", 31 0, v0x1466678b0_0;  1 drivers
v0x14666aa50_0 .net "mem_read_enable", 0 0, L_0x14666c9f0;  1 drivers
v0x14666ab00_0 .var "mem_result_MEM_WB", 31 0;
v0x14666ab90_0 .net "mem_write_enable", 0 0, L_0x14666ca90;  1 drivers
v0x14666ac40_0 .net "mmu_result", 31 0, v0x146668770_0;  1 drivers
v0x14666ad10_0 .var "opcode_EX_MEM", 7 0;
v0x14666adc0_0 .var "opcode_ID_EX", 7 0;
v0x14666ae60_0 .net "opcode_dec", 7 0, L_0x14666bdf0;  1 drivers
v0x14666af00_0 .var "regA_ID_EX", 3 0;
v0x14666afa0_0 .net "regA_data", 31 0, v0x146668e20_0;  1 drivers
v0x14666b060_0 .var "regA_data_ID_EX", 31 0;
v0x14666b0f0_0 .net "regA_dec", 3 0, L_0x14666bf10;  1 drivers
v0x14666a690_0 .var "regB_ID_EX", 3 0;
v0x14666b380_0 .net "regB_data", 31 0, v0x146668f00_0;  1 drivers
v0x14666b420_0 .var "regB_data_ID_EX", 31 0;
v0x14666b4b0_0 .net "regB_dec", 3 0, L_0x14666bfb0;  1 drivers
v0x14666b590_0 .var "regC_EX_MEM", 3 0;
v0x14666b640_0 .var "regC_ID_EX", 3 0;
v0x14666b6f0_0 .var "regC_MEM_WB", 3 0;
v0x14666b790_0 .net "regC_dec", 3 0, L_0x14666c0d0;  1 drivers
v0x14666b840_0 .net "result_out", 31 0, L_0x14666cef0;  alias, 1 drivers
v0x14666b8e0_0 .net "rst", 0 0, v0x14666bd40_0;  1 drivers
v0x14666b980_0 .net "write_data_wb", 31 0, L_0x14666ce80;  1 drivers
v0x14666ba40_0 .net "write_enable_wb", 0 0, L_0x14666cd10;  1 drivers
E_0x146607ff0 .event posedge, v0x14666b8e0_0, v0x146620ad0_0;
E_0x14661dab0/0 .event anyedge, v0x1466648e0_0, v0x1466672d0_0, v0x146664990_0, v0x146665a10_0;
E_0x14661dab0/1 .event anyedge, v0x146664f60_0, v0x1466666f0_0, v0x1466697f0_0, v0x146666fe0_0;
E_0x14661dab0 .event/or E_0x14661dab0/0, E_0x14661dab0/1;
L_0x14666c170 .cmp/eq 8, v0x14666adc0_0, L_0x148088010;
L_0x14666c290 .cmp/eq 8, v0x14666adc0_0, L_0x148088058;
L_0x14666c520 .cmp/eq 8, v0x14666adc0_0, L_0x148088130;
L_0x14666c670 .cmp/eq 8, v0x14666adc0_0, L_0x1480881c0;
L_0x14666c770 .cmp/eq 8, v0x14666adc0_0, L_0x148088208;
L_0x14666c9f0 .cmp/eq 8, v0x14666ad10_0, L_0x148088250;
L_0x14666ca90 .cmp/eq 8, v0x14666ad10_0, L_0x148088298;
L_0x14666cc30 .part v0x14666a500_0, 0, 4;
L_0x14666cd10 .cmp/ne 8, v0x14666ad10_0, L_0x1480882e0;
S_0x146655140 .scope module, "alu" "VectorALU" 3 113, 4 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 8 "opcode";
    .port_info 2 /INPUT 32 "in1";
    .port_info 3 /INPUT 32 "in2";
    .port_info 4 /OUTPUT 32 "out";
v0x146620ad0_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x146664770_0 .net "in1", 31 0, v0x14666b060_0;  1 drivers
v0x146664820_0 .net "in2", 31 0, v0x14666b420_0;  1 drivers
v0x1466648e0_0 .net "opcode", 7 0, v0x14666adc0_0;  1 drivers
v0x146664990_0 .var "out", 31 0;
v0x146664a80_0 .var "temp", 31 0;
E_0x146618910 .event posedge, v0x146620ad0_0;
S_0x146664bb0 .scope module, "att" "AttentionUnit" 3 133, 5 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "start";
    .port_info 2 /INPUT 32 "query";
    .port_info 3 /INPUT 32 "key";
    .port_info 4 /INPUT 32 "value";
    .port_info 5 /OUTPUT 32 "output_data";
v0x146664e00_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x146664eb0_0 .net "key", 31 0, v0x14666b420_0;  alias, 1 drivers
v0x146664f60_0 .var "output_data", 31 0;
v0x146665010_0 .net "query", 31 0, v0x14666b060_0;  alias, 1 drivers
v0x1466650c0_0 .var "score", 31 0;
v0x1466651a0_0 .net "start", 0 0, L_0x14666c520;  1 drivers
L_0x148088178 .functor BUFT 1, C4<00000000000000010000000000000001>, C4<0>, C4<0>, C4<0>;
v0x146665240_0 .net "value", 31 0, L_0x148088178;  1 drivers
S_0x146665380 .scope module, "conv" "ConvolutionUnit" 3 122, 6 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "start";
    .port_info 2 /INPUT 2 "stride";
    .port_info 3 /INPUT 2 "padding";
    .port_info 4 /INPUT 32 "input_data";
    .port_info 5 /INPUT 32 "filter_data";
    .port_info 6 /OUTPUT 32 "output_data";
v0x146665630_0 .var "acc", 31 0;
v0x1466656c0_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x146665790_0 .net "filter_data", 31 0, v0x14666b420_0;  alias, 1 drivers
v0x146665860_0 .var/i "i", 31 0;
v0x146665900_0 .net "input_data", 31 0, v0x14666b060_0;  alias, 1 drivers
v0x146665a10_0 .var "output_data", 31 0;
L_0x1480880e8 .functor BUFT 1, C4<00>, C4<0>, C4<0>, C4<0>;
v0x146665aa0_0 .net "padding", 1 0, L_0x1480880e8;  1 drivers
v0x146665b40_0 .net "start", 0 0, L_0x14666c390;  1 drivers
L_0x1480880a0 .functor BUFT 1, C4<01>, C4<0>, C4<0>, C4<0>;
v0x146665be0_0 .net "stride", 1 0, L_0x1480880a0;  1 drivers
S_0x146665d60 .scope module, "decoder" "InstructionDecoder" 3 56, 7 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 32 "instruction";
    .port_info 1 /OUTPUT 8 "opcode";
    .port_info 2 /OUTPUT 4 "regA";
    .port_info 3 /OUTPUT 4 "regB";
    .port_info 4 /OUTPUT 4 "regC";
v0x146665fd0_0 .net "instruction", 31 0, v0x14666a8a0_0;  1 drivers
v0x146666090_0 .net "opcode", 7 0, L_0x14666bdf0;  alias, 1 drivers
v0x146666130_0 .net "regA", 3 0, L_0x14666bf10;  alias, 1 drivers
v0x1466661c0_0 .net "regB", 3 0, L_0x14666bfb0;  alias, 1 drivers
v0x146666270_0 .net "regC", 3 0, L_0x14666c0d0;  alias, 1 drivers
L_0x14666bdf0 .part v0x14666a8a0_0, 24, 8;
L_0x14666bf10 .part v0x14666a8a0_0, 20, 4;
L_0x14666bfb0 .part v0x14666a8a0_0, 16, 4;
L_0x14666c0d0 .part v0x14666a8a0_0, 12, 4;
S_0x1466663e0 .scope module, "dma" "DMAController" 3 143, 8 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 32 "src_addr";
    .port_info 2 /INPUT 32 "dst_addr";
    .port_info 3 /INPUT 1 "start";
    .port_info 4 /OUTPUT 32 "data_out";
v0x146666660_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x1466666f0_0 .var "data_out", 31 0;
v0x146666780_0 .var "dma_buffer", 31 0;
v0x146666830_0 .net "dst_addr", 31 0, v0x14666b420_0;  alias, 1 drivers
v0x1466668d0_0 .net "src_addr", 31 0, v0x14666b060_0;  alias, 1 drivers
v0x1466669b0_0 .net "start", 0 0, L_0x14666c670;  1 drivers
S_0x146666ad0 .scope module, "fused_ops" "FusedOpsUnit" 3 160, 9 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 8 "opcode";
    .port_info 2 /INPUT 32 "inA";
    .port_info 3 /INPUT 32 "inB";
    .port_info 4 /INPUT 32 "mmu_out";
    .port_info 5 /INPUT 32 "conv_out";
    .port_info 6 /INPUT 32 "alu_out";
    .port_info 7 /OUTPUT 32 "fused_out";
v0x146666d90_0 .net "alu_out", 31 0, v0x146664990_0;  alias, 1 drivers
v0x146666e40_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x146666f50_0 .net "conv_out", 31 0, v0x146665a10_0;  alias, 1 drivers
v0x146666fe0_0 .var "fused_out", 31 0;
v0x146667070_0 .net "inA", 31 0, v0x14666b060_0;  alias, 1 drivers
v0x1466671c0_0 .net "inB", 31 0, v0x14666b420_0;  alias, 1 drivers
v0x1466672d0_0 .net "mmu_out", 31 0, v0x146668770_0;  alias, 1 drivers
v0x146667360_0 .net "opcode", 7 0, v0x14666adc0_0;  alias, 1 drivers
S_0x146667440 .scope module, "memory" "Memory" 3 205, 10 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 4 "addr";
    .port_info 2 /INPUT 32 "data_in";
    .port_info 3 /OUTPUT 32 "data_out";
    .port_info 4 /INPUT 1 "write_enable";
    .port_info 5 /INPUT 1 "read_enable";
v0x1466676c0_0 .net "addr", 3 0, L_0x14666cc30;  1 drivers
v0x146667780_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x146667820_0 .net "data_in", 31 0, v0x14666a500_0;  1 drivers
v0x1466678b0_0 .var "data_out", 31 0;
v0x146667940_0 .var/i "i", 31 0;
v0x146667a30_0 .net "read_enable", 0 0, L_0x14666c9f0;  alias, 1 drivers
v0x146667ad0 .array "sram", 0 15, 31 0;
v0x146667b70_0 .net "write_enable", 0 0, L_0x14666ca90;  alias, 1 drivers
S_0x146667ca0 .scope module, "mmu" "MatrixMultiplyUnit" 3 104, 11 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 8 "opcode";
    .port_info 2 /INPUT 32 "A";
    .port_info 3 /INPUT 32 "B";
    .port_info 4 /OUTPUT 32 "result";
v0x146667ee0_0 .net "A", 31 0, v0x14666b060_0;  alias, 1 drivers
v0x146667f70_0 .var "A_high16", 15 0;
v0x146668020_0 .var "A_low16", 15 0;
v0x1466680e0_0 .net "B", 31 0, v0x14666b420_0;  alias, 1 drivers
v0x146668180_0 .var "B_high16", 15 0;
v0x146668270_0 .var "B_low16", 15 0;
v0x146668320_0 .var "a_slice", 7 0;
v0x1466683d0_0 .var "acc", 31 0;
v0x146668480_0 .var "b_slice", 7 0;
v0x146668590_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x146668620_0 .var/i "i", 31 0;
v0x1466686d0_0 .net "opcode", 7 0, v0x14666adc0_0;  alias, 1 drivers
v0x146668770_0 .var "result", 31 0;
S_0x146668880 .scope module, "regfile" "RegisterFile" 3 67, 12 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 4 "read_addr1";
    .port_info 2 /INPUT 4 "read_addr2";
    .port_info 3 /INPUT 4 "write_addr";
    .port_info 4 /INPUT 32 "write_data";
    .port_info 5 /INPUT 1 "write_enable";
    .port_info 6 /OUTPUT 32 "read_data1";
    .port_info 7 /OUTPUT 32 "read_data2";
v0x146668b80_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x146668c10_0 .var/i "i", 31 0;
v0x146668ca0_0 .net "read_addr1", 3 0, L_0x14666bf10;  alias, 1 drivers
v0x146668d70_0 .net "read_addr2", 3 0, L_0x14666bfb0;  alias, 1 drivers
v0x146668e20_0 .var "read_data1", 31 0;
v0x146668f00_0 .var "read_data2", 31 0;
v0x146668fb0 .array "registers", 0 15, 31 0;
v0x146669050_0 .net "write_addr", 3 0, v0x14666b6f0_0;  1 drivers
v0x146669100_0 .net "write_data", 31 0, L_0x14666ce80;  alias, 1 drivers
v0x146669210_0 .net "write_enable", 0 0, L_0x14666cd10;  alias, 1 drivers
S_0x146669330 .scope module, "sg_unit" "ScatterGatherUnit" 3 151, 13 1 0, S_0x14664e590;
 .timescale 0 0;
    .port_info 0 /INPUT 1 "clk";
    .port_info 1 /INPUT 1 "start";
    .port_info 2 /INPUT 32 "base_addr";
    .port_info 3 /INPUT 32 "index";
    .port_info 4 /OUTPUT 32 "data_out";
v0x1466695a0_0 .net "base_addr", 31 0, v0x14666b060_0;  alias, 1 drivers
v0x146669650_0 .net "clk", 0 0, v0x14666bb30_0;  alias, 1 drivers
v0x1466697f0_0 .var "data_out", 31 0;
v0x146669880_0 .net "index", 31 0, v0x14666b420_0;  alias, 1 drivers
v0x146669910_0 .var "sg_buffer", 31 0;
v0x1466699a0_0 .net "start", 0 0, L_0x14666c770;  1 drivers
    .scope S_0x146668880;
T_0 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x146668c10_0, 0, 32;
T_0.0 ;
    %load/vec4 v0x146668c10_0;
    %cmpi/s 16, 0, 32;
    %jmp/0xz T_0.1, 5;
    %pushi/vec4 0, 0, 32;
    %ix/getv/s 4, v0x146668c10_0;
    %store/vec4a v0x146668fb0, 4, 0;
    %load/vec4 v0x146668c10_0;
    %addi 1, 0, 32;
    %store/vec4 v0x146668c10_0, 0, 32;
    %jmp T_0.0;
T_0.1 ;
    %end;
    .thread T_0;
    .scope S_0x146668880;
T_1 ;
    %wait E_0x146618910;
    %load/vec4 v0x146669210_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_1.0, 8;
    %load/vec4 v0x146669100_0;
    %load/vec4 v0x146669050_0;
    %pad/u 6;
    %ix/vec4 3;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x146668fb0, 0, 4;
T_1.0 ;
    %load/vec4 v0x146668ca0_0;
    %pad/u 6;
    %ix/vec4 4;
    %load/vec4a v0x146668fb0, 4;
    %assign/vec4 v0x146668e20_0, 0;
    %load/vec4 v0x146668d70_0;
    %pad/u 6;
    %ix/vec4 4;
    %load/vec4a v0x146668fb0, 4;
    %assign/vec4 v0x146668f00_0, 0;
    %jmp T_1;
    .thread T_1;
    .scope S_0x146667ca0;
T_2 ;
    %wait E_0x146618910;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x1466683d0_0, 0, 32;
    %load/vec4 v0x1466686d0_0;
    %dup/vec4;
    %pushi/vec4 3, 0, 8;
    %cmp/u;
    %jmp/1 T_2.0, 6;
    %dup/vec4;
    %pushi/vec4 4, 0, 8;
    %cmp/u;
    %jmp/1 T_2.1, 6;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x1466683d0_0, 0, 32;
    %jmp T_2.3;
T_2.0 ;
    %load/vec4 v0x146667ee0_0;
    %parti/s 16, 0, 2;
    %store/vec4 v0x146668020_0, 0, 16;
    %load/vec4 v0x146667ee0_0;
    %parti/s 16, 16, 6;
    %store/vec4 v0x146667f70_0, 0, 16;
    %load/vec4 v0x1466680e0_0;
    %parti/s 16, 0, 2;
    %store/vec4 v0x146668270_0, 0, 16;
    %load/vec4 v0x1466680e0_0;
    %parti/s 16, 16, 6;
    %store/vec4 v0x146668180_0, 0, 16;
    %load/vec4 v0x146668020_0;
    %pad/u 32;
    %load/vec4 v0x146668270_0;
    %pad/u 32;
    %mul;
    %load/vec4 v0x146667f70_0;
    %pad/u 32;
    %load/vec4 v0x146668180_0;
    %pad/u 32;
    %mul;
    %add;
    %store/vec4 v0x1466683d0_0, 0, 32;
    %jmp T_2.3;
T_2.1 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x146668620_0, 0, 32;
T_2.4 ;
    %load/vec4 v0x146668620_0;
    %cmpi/s 4, 0, 32;
    %jmp/0xz T_2.5, 5;
    %load/vec4 v0x146668620_0;
    %dup/vec4;
    %pushi/vec4 0, 0, 32;
    %cmp/u;
    %jmp/1 T_2.6, 6;
    %dup/vec4;
    %pushi/vec4 1, 0, 32;
    %cmp/u;
    %jmp/1 T_2.7, 6;
    %dup/vec4;
    %pushi/vec4 2, 0, 32;
    %cmp/u;
    %jmp/1 T_2.8, 6;
    %dup/vec4;
    %pushi/vec4 3, 0, 32;
    %cmp/u;
    %jmp/1 T_2.9, 6;
    %jmp T_2.10;
T_2.6 ;
    %load/vec4 v0x146667ee0_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x146668320_0, 0, 8;
    %load/vec4 v0x1466680e0_0;
    %parti/s 8, 0, 2;
    %store/vec4 v0x146668480_0, 0, 8;
    %jmp T_2.10;
T_2.7 ;
    %load/vec4 v0x146667ee0_0;
    %parti/s 8, 8, 5;
    %store/vec4 v0x146668320_0, 0, 8;
    %load/vec4 v0x1466680e0_0;
    %parti/s 8, 8, 5;
    %store/vec4 v0x146668480_0, 0, 8;
    %jmp T_2.10;
T_2.8 ;
    %load/vec4 v0x146667ee0_0;
    %parti/s 8, 16, 6;
    %store/vec4 v0x146668320_0, 0, 8;
    %load/vec4 v0x1466680e0_0;
    %parti/s 8, 16, 6;
    %store/vec4 v0x146668480_0, 0, 8;
    %jmp T_2.10;
T_2.9 ;
    %load/vec4 v0x146667ee0_0;
    %parti/s 8, 24, 6;
    %store/vec4 v0x146668320_0, 0, 8;
    %load/vec4 v0x1466680e0_0;
    %parti/s 8, 24, 6;
    %store/vec4 v0x146668480_0, 0, 8;
    %jmp T_2.10;
T_2.10 ;
    %pop/vec4 1;
    %load/vec4 v0x1466683d0_0;
    %load/vec4 v0x146668320_0;
    %parti/s 1, 7, 4;
    %replicate 24;
    %load/vec4 v0x146668320_0;
    %concat/vec4; draw_concat_vec4
    %load/vec4 v0x146668480_0;
    %parti/s 1, 7, 4;
    %replicate 24;
    %load/vec4 v0x146668480_0;
    %concat/vec4; draw_concat_vec4
    %mul;
    %add;
    %store/vec4 v0x1466683d0_0, 0, 32;
    %load/vec4 v0x146668620_0;
    %addi 1, 0, 32;
    %store/vec4 v0x146668620_0, 0, 32;
    %jmp T_2.4;
T_2.5 ;
    %jmp T_2.3;
T_2.3 ;
    %pop/vec4 1;
    %load/vec4 v0x1466683d0_0;
    %assign/vec4 v0x146668770_0, 0;
    %jmp T_2;
    .thread T_2;
    .scope S_0x146655140;
T_3 ;
    %wait E_0x146618910;
    %load/vec4 v0x1466648e0_0;
    %dup/vec4;
    %pushi/vec4 5, 0, 8;
    %cmp/u;
    %jmp/1 T_3.0, 6;
    %dup/vec4;
    %pushi/vec4 6, 0, 8;
    %cmp/u;
    %jmp/1 T_3.1, 6;
    %dup/vec4;
    %pushi/vec4 7, 0, 8;
    %cmp/u;
    %jmp/1 T_3.2, 6;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x146664990_0, 0;
    %jmp T_3.4;
T_3.0 ;
    %load/vec4 v0x146664770_0;
    %parti/s 1, 31, 6;
    %cmpi/e 1, 0, 1;
    %jmp/0xz  T_3.5, 4;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x146664990_0, 0;
    %jmp T_3.6;
T_3.5 ;
    %load/vec4 v0x146664770_0;
    %assign/vec4 v0x146664990_0, 0;
T_3.6 ;
    %jmp T_3.4;
T_3.1 ;
    %load/vec4 v0x146664770_0;
    %load/vec4 v0x146664820_0;
    %add;
    %assign/vec4 v0x146664990_0, 0;
    %jmp T_3.4;
T_3.2 ;
    %load/vec4 v0x146664770_0;
    %cmpi/e 0, 0, 32;
    %jmp/0xz  T_3.7, 4;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x146664990_0, 0;
    %jmp T_3.8;
T_3.7 ;
    %load/vec4 v0x146664770_0;
    %addi 1, 0, 32;
    %store/vec4 v0x146664a80_0, 0, 32;
    %load/vec4 v0x146664770_0;
    %load/vec4 v0x146664a80_0;
    %div;
    %assign/vec4 v0x146664990_0, 0;
T_3.8 ;
    %jmp T_3.4;
T_3.4 ;
    %pop/vec4 1;
    %jmp T_3;
    .thread T_3;
    .scope S_0x146665380;
T_4 ;
    %wait E_0x146618910;
    %load/vec4 v0x146665b40_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_4.0, 8;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x146665630_0, 0, 32;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x146665860_0, 0, 32;
T_4.2 ;
    %load/vec4 v0x146665860_0;
    %cmpi/s 9, 0, 32;
    %jmp/0xz T_4.3, 5;
    %load/vec4 v0x146665630_0;
    %load/vec4 v0x146665900_0;
    %load/vec4 v0x146665860_0;
    %muli 4, 0, 32;
    %part/s 4;
    %pad/u 32;
    %load/vec4 v0x146665790_0;
    %load/vec4 v0x146665860_0;
    %muli 4, 0, 32;
    %part/s 4;
    %pad/u 32;
    %mul;
    %add;
    %store/vec4 v0x146665630_0, 0, 32;
    %load/vec4 v0x146665860_0;
    %addi 1, 0, 32;
    %store/vec4 v0x146665860_0, 0, 32;
    %jmp T_4.2;
T_4.3 ;
    %load/vec4 v0x146665630_0;
    %assign/vec4 v0x146665a10_0, 0;
T_4.0 ;
    %jmp T_4;
    .thread T_4;
    .scope S_0x146664bb0;
T_5 ;
    %wait E_0x146618910;
    %load/vec4 v0x1466651a0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_5.0, 8;
    %load/vec4 v0x146665010_0;
    %load/vec4 v0x146664eb0_0;
    %mul;
    %ix/load 4, 8, 0;
    %flag_set/imm 4, 0;
    %shiftr 4;
    %store/vec4 v0x1466650c0_0, 0, 32;
    %load/vec4 v0x1466650c0_0;
    %load/vec4 v0x146665240_0;
    %mul;
    %store/vec4 v0x146664f60_0, 0, 32;
T_5.0 ;
    %jmp T_5;
    .thread T_5;
    .scope S_0x1466663e0;
T_6 ;
    %wait E_0x146618910;
    %load/vec4 v0x1466669b0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_6.0, 8;
    %load/vec4 v0x1466668d0_0;
    %store/vec4 v0x146666780_0, 0, 32;
    %load/vec4 v0x146666780_0;
    %assign/vec4 v0x1466666f0_0, 0;
T_6.0 ;
    %jmp T_6;
    .thread T_6;
    .scope S_0x146669330;
T_7 ;
    %wait E_0x146618910;
    %load/vec4 v0x1466699a0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_7.0, 8;
    %load/vec4 v0x1466695a0_0;
    %load/vec4 v0x146669880_0;
    %ix/load 4, 2, 0;
    %flag_set/imm 4, 0;
    %shiftl 4;
    %add;
    %store/vec4 v0x146669910_0, 0, 32;
    %load/vec4 v0x146669910_0;
    %assign/vec4 v0x1466697f0_0, 0;
T_7.0 ;
    %jmp T_7;
    .thread T_7;
    .scope S_0x146666ad0;
T_8 ;
    %wait E_0x146618910;
    %load/vec4 v0x146667360_0;
    %dup/vec4;
    %pushi/vec4 48, 0, 8;
    %cmp/u;
    %jmp/1 T_8.0, 6;
    %dup/vec4;
    %pushi/vec4 49, 0, 8;
    %cmp/u;
    %jmp/1 T_8.1, 6;
    %dup/vec4;
    %pushi/vec4 50, 0, 8;
    %cmp/u;
    %jmp/1 T_8.2, 6;
    %load/vec4 v0x146666d90_0;
    %assign/vec4 v0x146666fe0_0, 0;
    %jmp T_8.4;
T_8.0 ;
    %load/vec4 v0x1466672d0_0;
    %parti/s 1, 31, 6;
    %cmpi/e 1, 0, 1;
    %jmp/0xz  T_8.5, 4;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x146666fe0_0, 0;
    %jmp T_8.6;
T_8.5 ;
    %load/vec4 v0x1466672d0_0;
    %assign/vec4 v0x146666fe0_0, 0;
T_8.6 ;
    %jmp T_8.4;
T_8.1 ;
    %load/vec4 v0x146666f50_0;
    %parti/s 1, 31, 6;
    %cmpi/e 1, 0, 1;
    %jmp/0xz  T_8.7, 4;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x146666fe0_0, 0;
    %jmp T_8.8;
T_8.7 ;
    %load/vec4 v0x146666f50_0;
    %assign/vec4 v0x146666fe0_0, 0;
T_8.8 ;
    %jmp T_8.4;
T_8.2 ;
    %load/vec4 v0x1466672d0_0;
    %load/vec4 v0x1466671c0_0;
    %add;
    %assign/vec4 v0x146666fe0_0, 0;
    %jmp T_8.4;
T_8.4 ;
    %pop/vec4 1;
    %jmp T_8;
    .thread T_8;
    .scope S_0x146667440;
T_9 ;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x146667940_0, 0, 32;
T_9.0 ;
    %load/vec4 v0x146667940_0;
    %cmpi/s 16, 0, 32;
    %jmp/0xz T_9.1, 5;
    %pushi/vec4 0, 0, 32;
    %ix/getv/s 4, v0x146667940_0;
    %store/vec4a v0x146667ad0, 4, 0;
    %load/vec4 v0x146667940_0;
    %addi 1, 0, 32;
    %store/vec4 v0x146667940_0, 0, 32;
    %jmp T_9.0;
T_9.1 ;
    %end;
    .thread T_9;
    .scope S_0x146667440;
T_10 ;
    %wait E_0x146618910;
    %load/vec4 v0x146667b70_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.0, 8;
    %load/vec4 v0x146667820_0;
    %load/vec4 v0x1466676c0_0;
    %pad/u 6;
    %ix/vec4 3;
    %ix/load 4, 0, 0; Constant delay
    %assign/vec4/a/d v0x146667ad0, 0, 4;
T_10.0 ;
    %load/vec4 v0x146667a30_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_10.2, 8;
    %load/vec4 v0x1466676c0_0;
    %pad/u 6;
    %ix/vec4 4;
    %load/vec4a v0x146667ad0, 4;
    %assign/vec4 v0x1466678b0_0, 0;
T_10.2 ;
    %jmp T_10;
    .thread T_10;
    .scope S_0x14664e590;
T_11 ;
    %wait E_0x146607ff0;
    %load/vec4 v0x14666b8e0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_11.0, 8;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x14666a8a0_0, 0;
    %jmp T_11.1;
T_11.0 ;
    %load/vec4 v0x14666a930_0;
    %assign/vec4 v0x14666a8a0_0, 0;
T_11.1 ;
    %jmp T_11;
    .thread T_11;
    .scope S_0x14664e590;
T_12 ;
    %wait E_0x146607ff0;
    %load/vec4 v0x14666b8e0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_12.0, 8;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x14666adc0_0, 0;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x14666af00_0, 0;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x14666a690_0, 0;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x14666b640_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x14666b060_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x14666b420_0, 0;
    %jmp T_12.1;
T_12.0 ;
    %load/vec4 v0x14666ae60_0;
    %assign/vec4 v0x14666adc0_0, 0;
    %load/vec4 v0x14666b0f0_0;
    %assign/vec4 v0x14666af00_0, 0;
    %load/vec4 v0x14666b4b0_0;
    %assign/vec4 v0x14666a690_0, 0;
    %load/vec4 v0x14666b790_0;
    %assign/vec4 v0x14666b640_0, 0;
    %load/vec4 v0x14666afa0_0;
    %assign/vec4 v0x14666b060_0, 0;
    %load/vec4 v0x14666b380_0;
    %assign/vec4 v0x14666b420_0, 0;
T_12.1 ;
    %jmp T_12;
    .thread T_12;
    .scope S_0x14664e590;
T_13 ;
    %wait E_0x14661dab0;
    %load/vec4 v0x14666adc0_0;
    %dup/vec4;
    %pushi/vec4 3, 0, 8;
    %cmp/u;
    %jmp/1 T_13.0, 6;
    %dup/vec4;
    %pushi/vec4 4, 0, 8;
    %cmp/u;
    %jmp/1 T_13.1, 6;
    %dup/vec4;
    %pushi/vec4 5, 0, 8;
    %cmp/u;
    %jmp/1 T_13.2, 6;
    %dup/vec4;
    %pushi/vec4 6, 0, 8;
    %cmp/u;
    %jmp/1 T_13.3, 6;
    %dup/vec4;
    %pushi/vec4 7, 0, 8;
    %cmp/u;
    %jmp/1 T_13.4, 6;
    %dup/vec4;
    %pushi/vec4 32, 0, 8;
    %cmp/u;
    %jmp/1 T_13.5, 6;
    %dup/vec4;
    %pushi/vec4 33, 0, 8;
    %cmp/u;
    %jmp/1 T_13.6, 6;
    %dup/vec4;
    %pushi/vec4 16, 0, 8;
    %cmp/u;
    %jmp/1 T_13.7, 6;
    %dup/vec4;
    %pushi/vec4 17, 0, 8;
    %cmp/u;
    %jmp/1 T_13.8, 6;
    %dup/vec4;
    %pushi/vec4 48, 0, 8;
    %cmp/u;
    %jmp/1 T_13.9, 6;
    %dup/vec4;
    %pushi/vec4 49, 0, 8;
    %cmp/u;
    %jmp/1 T_13.10, 6;
    %pushi/vec4 0, 0, 32;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.0 ;
    %load/vec4 v0x14666ac40_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.1 ;
    %load/vec4 v0x14666ac40_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.2 ;
    %load/vec4 v0x14666a1c0_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.3 ;
    %load/vec4 v0x14666a1c0_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.4 ;
    %load/vec4 v0x14666a1c0_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.5 ;
    %load/vec4 v0x14666a390_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.6 ;
    %load/vec4 v0x14666a260_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.7 ;
    %load/vec4 v0x14666a460_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.8 ;
    %load/vec4 v0x14666a810_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.9 ;
    %load/vec4 v0x14666a750_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.10 ;
    %load/vec4 v0x14666a750_0;
    %store/vec4 v0x14666a5b0_0, 0, 32;
    %jmp T_13.12;
T_13.12 ;
    %pop/vec4 1;
    %jmp T_13;
    .thread T_13, $push;
    .scope S_0x14664e590;
T_14 ;
    %wait E_0x146607ff0;
    %load/vec4 v0x14666b8e0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_14.0, 8;
    %pushi/vec4 0, 0, 8;
    %assign/vec4 v0x14666ad10_0, 0;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x14666b590_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x14666a500_0, 0;
    %jmp T_14.1;
T_14.0 ;
    %load/vec4 v0x14666adc0_0;
    %assign/vec4 v0x14666ad10_0, 0;
    %load/vec4 v0x14666b640_0;
    %assign/vec4 v0x14666b590_0, 0;
    %load/vec4 v0x14666a5b0_0;
    %assign/vec4 v0x14666a500_0, 0;
T_14.1 ;
    %jmp T_14;
    .thread T_14;
    .scope S_0x14664e590;
T_15 ;
    %wait E_0x146607ff0;
    %load/vec4 v0x14666b8e0_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_15.0, 8;
    %pushi/vec4 0, 0, 4;
    %assign/vec4 v0x14666b6f0_0, 0;
    %pushi/vec4 0, 0, 32;
    %assign/vec4 v0x14666ab00_0, 0;
    %jmp T_15.1;
T_15.0 ;
    %load/vec4 v0x14666b590_0;
    %assign/vec4 v0x14666b6f0_0, 0;
    %load/vec4 v0x14666aa50_0;
    %flag_set/vec4 8;
    %jmp/0xz  T_15.2, 8;
    %load/vec4 v0x14666a9c0_0;
    %assign/vec4 v0x14666ab00_0, 0;
    %jmp T_15.3;
T_15.2 ;
    %load/vec4 v0x14666a500_0;
    %assign/vec4 v0x14666ab00_0, 0;
T_15.3 ;
T_15.1 ;
    %jmp T_15;
    .thread T_15;
    .scope S_0x146655470;
T_16 ;
    %delay 5, 0;
    %load/vec4 v0x14666bb30_0;
    %inv;
    %store/vec4 v0x14666bb30_0, 0, 1;
    %jmp T_16;
    .thread T_16;
    .scope S_0x146655470;
T_17 ;
    %vpi_call 2 19 "$dumpfile", "tpu_waveform.vcd" {0 0 0};
    %vpi_call 2 20 "$dumpvars", 32'sb00000000000000000000000000000000, S_0x146655470 {0 0 0};
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14666bb30_0, 0, 1;
    %pushi/vec4 1, 0, 1;
    %store/vec4 v0x14666bd40_0, 0, 1;
    %delay 10, 0;
    %pushi/vec4 0, 0, 1;
    %store/vec4 v0x14666bd40_0, 0, 1;
    %pushi/vec4 50405376, 0, 32;
    %store/vec4 v0x14666bbd0_0, 0, 32;
    %delay 20, 0;
    %vpi_call 2 29 "$display", "[Test1] FP16 MMA Result: %h", v0x14666bc70_0 {0 0 0};
    %pushi/vec4 67182592, 0, 32;
    %store/vec4 v0x14666bbd0_0, 0, 32;
    %delay 20, 0;
    %vpi_call 2 34 "$display", "[Test2] INT8 MMA Result: %h", v0x14666bc70_0 {0 0 0};
    %pushi/vec4 805380096, 0, 32;
    %store/vec4 v0x14666bbd0_0, 0, 32;
    %delay 20, 0;
    %vpi_call 2 39 "$display", "[Test3] FUSE_MMA_RELU Result: %h", v0x14666bc70_0 {0 0 0};
    %pushi/vec4 536944640, 0, 32;
    %store/vec4 v0x14666bbd0_0, 0, 32;
    %delay 20, 0;
    %vpi_call 2 44 "$display", "[Test4] CONV2D Result: %h", v0x14666bc70_0 {0 0 0};
    %pushi/vec4 553721856, 0, 32;
    %store/vec4 v0x14666bbd0_0, 0, 32;
    %delay 20, 0;
    %vpi_call 2 49 "$display", "[Test5] ATTENTION Result: %h", v0x14666bc70_0 {0 0 0};
    %pushi/vec4 285286400, 0, 32;
    %store/vec4 v0x14666bbd0_0, 0, 32;
    %delay 20, 0;
    %vpi_call 2 54 "$display", "[Test6] Scatter/Gather Result: %h", v0x14666bc70_0 {0 0 0};
    %pushi/vec4 268509184, 0, 32;
    %store/vec4 v0x14666bbd0_0, 0, 32;
    %delay 20, 0;
    %vpi_call 2 59 "$display", "[Test7] DMA Result: %h", v0x14666bc70_0 {0 0 0};
    %delay 50, 0;
    %vpi_call 2 62 "$finish" {0 0 0};
    %end;
    .thread T_17;
# The file index is used to find the file name in the following table.
:file_names 14;
    "N/A";
    "<interactive>";
    "test/tpu_tb.v";
    "src/tpu_top.v";
    "src/vector_alu.v";
    "src/attention_unit.v";
    "src/convolution_unit.v";
    "src/instruction_decoder.v";
    "src/dma_controller.v";
    "src/fused_ops_unit.v";
    "src/memory.v";
    "src/matrix_multiply.v";
    "src/register_file.v";
    "src/scatter_gather.v";
